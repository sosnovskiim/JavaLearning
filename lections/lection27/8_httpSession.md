## üîπ 8. `HttpSession`: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏

---

### üß† –ß—Ç–æ —Ç–∞–∫–æ–µ `HttpSession`

`HttpSession` ‚Äî —ç—Ç–æ **–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**, —Å–≤—è–∑–∞–Ω–Ω–æ–µ —Å –∫–ª–∏–µ–Ω—Ç–æ–º.  
Spring Boot (–∏ –≤–µ—Å—å —Å–µ—Ä–≤–ª–µ—Ç-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç —Å–µ—Å—Å–∏—é –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ –∏ –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç –∫ –Ω–µ–π ID —á–µ—Ä–µ–∑ cookie `JSESSIONID`.

–°–µ—Å—Å–∏—è:
- —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—ã–∑–æ–≤–µ `request.getSession()`
- –∂–∏–≤—ë—Ç –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –≤—Ä–µ–º—è (—Ç–∞–π–º–∞—É—Ç)
- –ø–æ–∑–≤–æ–ª—è–µ—Ç **—Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏**

---

### üì¶ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `HttpSession`

```java
@PostMapping("/login")
public String login(@RequestParam String username, HttpSession session) {
    session.setAttribute("username", username); // —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    return "redirect:/";
}

@GetMapping("/")
public String index(HttpSession session, Model model) {
    String name = (String) session.getAttribute("username");
    model.addAttribute("username", name);
    return "index";
}
```

---

### üßæ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —à–∞–±–ª–æ–Ω–µ

```html
<h1 th:if="${username != null}">–ü—Ä–∏–≤–µ—Ç, <span th:text="${username}">–≥–æ—Å—Ç—å</span>!</h1>

<div th:if="${username == null}">
    <form th:action="@{/login}" method="post">
        <input type="text" name="username" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è">
        <button type="submit">–í–æ–π—Ç–∏</button>
    </form>
</div>
```

---

### ‚è± –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –∂–∏–∑–Ω–∏ —Å–µ—Å—Å–∏–∏

#### –í `application.properties`:

```properties
server.servlet.session.timeout=30m
```

#### –ò–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ:

```java
session.setMaxInactiveInterval(60 * 30); // 30 –º–∏–Ω—É—Ç –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
```

---

### üîê –ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è —Å–µ—Å—Å–∏—è

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî –≤ **–ø–∞–º—è—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞**.  
–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å —Å–µ—Å—Å–∏–∏ –≤:
- Redis (Spring Session)
- –ë–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- Hazelcast –∏ –¥—Ä—É–≥–∏—Ö —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â–∞—Ö

---

### üß† –ü—Ä–∞–∫—Ç–∏–∫–∞: –ª–æ–≥–∏–∫–∞ –≤—Ö–æ–¥–∞

1. –û—Ç–∫—Ä—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É `/`
2. –ï—Å–ª–∏ `session.getAttribute("username") == null` ‚Üí —Ñ–æ—Ä–º–∞ –≤—Ö–æ–¥–∞
3. –ü–æ—Å–ª–µ `POST /login` ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∏–º—è –≤ —Å–µ—Å—Å–∏—é
4. –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ `/`, –≥–¥–µ –∏–º—è —É–∂–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

---
